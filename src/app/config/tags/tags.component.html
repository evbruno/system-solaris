<ngb-alert *ngIf="successMsg" type="success" dismissible="true" (close)="successMsg = null">
  <strong>OK</strong>: {{ successMsg }}
</ngb-alert>

<ngb-alert *ngIf="errorMsg" type="danger" dismissible="true" (close)="errorMsg = null">
  <strong>Error</strong>: {{ errorMsg }}
</ngb-alert>

<i>{{updateAt}}</i>

<table class="table table-striped table-bordered table-sm">
  <thead>
    <tr>
      <th width="150">key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="! (tags | async)?.length">
      <td colspan="2">Empty</td>
    </tr>
    <tr *ngFor="let tag of tags | async" (click)="tagFormSelectRow(tag)">
      <td>{{tag.$key}}</td>
      <td>{{tag.description}}</td>
      <td width="1">
        <a class="btn btn-danger btn-sm"
          role="button"
          title="Delete {{tag.$key}}"
          (click)="tagFormDeleteRow(tag)">
            <i class="fa fa-trash-o" aria-hidden="true"></i>
          </a>
      </td>
    </tr>
  </tbody>
</table>

<form #myForm="ngForm">
<fieldset [disabled]="isFormSubmiting">
  <div class="form-group row">
    <label for="key" class="col-4 col-form-label">Key</label>
    <input id="key" name="key"
            [(ngModel)]="tagFormModel.key"
            [readonly]="isEditingTagFormModel"
            type="text"
            class="form-control col-8"
            minlength="2"
            required />
  </div>

  <div class="form-group row">
    <label for="description" class="col-4 col-form-label">Description</label>
    <input id="description" name="description"
            [(ngModel)]="tagFormModel.description"
            [autofocus]="isEditingTagFormModel"
            type="text"
            class="form-control col-8"
            minlength="2"
            required />
  </div>
  </fieldset>

  <button type="submit" class="btn btn-primary btn-sm" role="button"
    [disabled]="!myForm.form.valid || isFormSubmiting"
    (click)="tagFormSubmitAction()">
    <i *ngIf="!isFormSubmiting" class="fa fa-floppy-o" aria-hidden="true"></i>
    <i *ngIf="isFormSubmiting" class="fa fa-1x fa-spinner fa-spin"></i>
    Save
  </button>

  <button type="reset" class="btn btn-secondary btn-sm" role="button"
    (click)="tagFormCancelAction()">
    <i *ngIf="!isFormSubmiting" class="fa fa-ban" aria-hidden="true"></i>
    <i *ngIf="isFormSubmiting" class="fa fa-ban" aria-hidden="true"></i>
    Reset
  </button>

</form>
